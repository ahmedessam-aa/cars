<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช - ูุตูุน ุงูุจููุณุงูู</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <h1>ูุตูุน ุงูุจููุณุงูู</h1>
                    <p>ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช ูุงูุตูุงูุฉ</p>
                </div>

                <div class="login-tabs">
                    <button class="tab-btn active" onclick="switchTab('login')">ุชุณุฌูู ุฏุฎูู</button>
                    <button class="tab-btn" onclick="switchTab('register')">ูุณุชุฎุฏู ุฌุฏูุฏ</button>
                </div>

                <!-- ููุฑู ุงูุฏุฎูู -->
                <form id="loginForm" class="login-form active-form" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>ุงุณู ุงููุณุชุฎุฏู:</label>
                        <input type="text" id="loginUsername" required placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู">
                    </div>
                    <div class="form-group">
                        <label>ูููุฉ ุงููุฑูุฑ:</label>
                        <input type="password" id="loginPassword" required placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">ุฏุฎูู</button>
                    <div id="loginError" class="error-message"></div>
                </form>

                <!-- ููุฑู ุงูุชุณุฌูู -->
                <form id="registerForm" class="login-form" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>ุงุณู ุงููุณุชุฎุฏู:</label>
                        <input type="text" id="regUsername" required placeholder="ุฃุฎุชุฑ ุงุณู ูุณุชุฎุฏู">
                    </div>
                    <div class="form-group">
                        <label>ูููุฉ ุงููุฑูุฑ:</label>
                        <input type="password" id="regPassword" required placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                    </div>
                    <div class="form-group">
                        <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ:</label>
                        <input type="password" id="regPasswordConfirm" required placeholder="ุฃุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">ุชุณุฌูู</button>
                    <div id="registerError" class="error-message"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- ุงููุธุงู ุงูุฑุฆูุณู -->
    <div class="container" id="mainSystem" style="display: none;">
        <!-- ุงูุฑุฃุณ -->
        <header class="header">
            <div class="header-content">
                <h1>ูุตูุน ุงูุจููุณุงูู</h1>
                <p class="subtitle">ูุธุงู ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช ูุงูุตูุงูุฉ</p>
            </div>
            <div class="header-info">
                <button class="btn btn-print" onclick="printPage()" title="ุทุจุงุนุฉ ุงูุตูุญุฉ">๐จ๏ธ ุทุจุงุนุฉ</button>
                <span class="date-time" id="dateTime"></span>
                <div class="user-info">
                    <span id="currentUser"></span>
                    <button class="btn btn-danger" onclick="handleLogout()" title="ุชุณุฌูู ุฎุฑูุฌ">ุฎุฑูุฌ</button>
                </div>
            </div>
        </header>

        <!-- ุงูุดุฑูุท ุงูุฌุงูุจู -->
        <nav class="sidebar">
            <ul class="nav-menu">
                <li><a href="#" data-section="dashboard" class="nav-link active">๐ ููุญุฉ ุงูุชุญูู</a></li>
                <li><a href="#" data-section="vehicles" class="nav-link">๐ ุงููุฑูุจุงุช</a></li>
                <li><a href="#" data-section="maintenance" class="nav-link">๐ง ุงูุตูุงูุฉ ูุงูุชุตููุญ</a></li>
                <li><a href="#" data-section="violations" class="nav-link">โ๏ธ ุงููุฎุงููุงุช</a></li>
                <li><a href="#" data-section="licenses" class="nav-link">๐ ุงูุฑุฎุต</a></li>
                <li><a href="#" data-section="expenses" class="nav-link">๐ฐ ุงููููุงุช</a></li>
                <li><a href="#" data-section="advance" class="nav-link">๐ณ ุงูุนูุฏุฉ</a></li>
                <li><a href="#" data-section="reports" class="nav-link">๐ ุงูุชูุงุฑูุฑ</a></li>
                <li><a href="#" data-section="settings" class="nav-link">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</a></li>
            </ul>
        </nav>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <main class="main-content">
            <!-- ููุญุฉ ุงูุชุญูู -->
            <section id="dashboard" class="section active">
                <div class="section-header">
                    <h2>ููุญุฉ ุงูุชุญูู</h2>
                </div>
                <div class="dashboard-grid">
                    <div class="card stat-card">
                        <div class="stat-icon">๐</div>
                        <div class="stat-content">
                            <h3>ุฅุฌูุงูู ุงููุฑูุจุงุช</h3>
                            <p class="stat-number" id="totalVehicles">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon">โ๏ธ</div>
                        <div class="stat-content">
                            <h3>ุฑุฎุต ููุชููุฉ ูุฑูุจุงู</h3>
                            <p class="stat-number" id="expiringLicenses">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon">๐ง</div>
                        <div class="stat-content">
                            <h3>ูู ุงูุตูุงูุฉ</h3>
                            <p class="stat-number" id="inMaintenance">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon">๐ฐ</div>
                        <div class="stat-content">
                            <h3>ุชูุงููู ุงูุตูุงูุฉ (ูุฐุง ุงูุดูุฑ)</h3>
                            <p class="stat-number" id="monthlyExpenses">0 ุฌููู</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon">โ๏ธ</div>
                        <div class="stat-content">
                            <h3>ุฅุฌูุงูู ุงููุฎุงููุงุช</h3>
                            <p class="stat-number" id="totalViolations">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-icon">๐ณ</div>
                        <div class="stat-content">
                            <h3>ุงููุฎุงููุงุช ุงููุนููุฉ</h3>
                            <p class="stat-number" id="pendingViolations">0</p>
                        </div>
                    </div>
                </div>

                <div class="alerts-section card">
                    <h3>๐ ุงูุชูุจููุงุช ุงููุงูุฉ</h3>
                    <div id="alertsList" class="alerts-list">
                        <p class="empty-message">ูุง ุชูุฌุฏ ุชูุจููุงุช</p>
                    </div>
                </div>

                <div class="card">
                    <h3>๐ ุขุฎุฑ ุงููุฑูุจุงุช</h3>
                    <div class="table-container dashboard-vehicles-table">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ุงูููุญุฉ</th>
                                    <th>ููุน ุงูุนุฑุจูุฉ</th>
                                    <th>ุงุณู ุงูุณุงุฆู</th>
                                    <th>ุงูุญุงูุฉ</th>
                                    <th>ุงูุชูุงุก ุงูุชุฑุฎูุต</th>
                                    <th>ุงูููุงุญุธุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="dashboardVehiclesTable">
                                <tr class="empty-row">
                                    <td colspan="6">ูุง ุชูุฌุฏ ูุฑูุจุงุช</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช -->
            <section id="vehicles" class="section">
                <div class="section-header">
                    <h2>ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช</h2>
                    <button class="btn btn-primary" onclick="openVehicleModal()">+ ุฅุถุงูุฉ ูุฑูุจุฉ ุฌุฏูุฏุฉ</button>
                </div>

                <div class="filters">
                    <input type="text" id="vehicleSearch" placeholder="ุงุจุญุซ ุนู ูุฑูุจุฉ..." class="search-input">
                    <select id="vehicleStatusFilter" class="filter-select">
                        <option value="">ุฌููุน ุงูุญุงูุงุช</option>
                        <option value="ูุดุทุฉ">ูุดุทุฉ</option>
                        <option value="ูู ุงูุตูุงูุฉ">ูู ุงูุตูุงูุฉ</option>
                        <option value="ูุนุทูุจุฉ">ูุนุทูุจุฉ</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงูููุญุฉ</th>
                                <th>ุงููููุฐุฌ</th>
                                <th>ุงูุณูุฉ</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุงูุชูุงุก ุงูุฑุฎุตุฉ</th>
                                <th>ุนุฏุฏ ุงููุฎุงููุงุช</th>
                                <th>ุงููุจูุบ ุงููุฏููุน (ุฌููู)</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="vehiclesTable">
                            <tr class="empty-row">
                                <td colspan="8">ูุง ุชูุฌุฏ ูุฑูุจุงุช</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุงูุตูุงูุฉ ูุงูุชุตููุญ -->
            <section id="maintenance" class="section">
                <div class="section-header">
                    <h2>ุงูุตูุงูุฉ ูุงูุชุตููุญ</h2>
                    <button class="btn btn-primary" onclick="openMaintenanceModal()">+ ุชุณุฌูู ุตูุงูุฉ ุฌุฏูุฏุฉ</button>
                </div>

                <div class="filters">
                    <input type="text" id="maintenanceSearch" placeholder="ุงุจุญุซ ุนู ููุญุฉ ุงููุฑูุจุฉ..." class="search-input">
                    <select id="maintenanceStatusFilter" class="filter-select">
                        <option value="">ุฌููุน ุงูุญุงูุงุช</option>
                        <option value="ููุฏ ุงูุฅุฌุฑุงุก">ููุฏ ุงูุฅุฌุฑุงุก</option>
                        <option value="ููุชููุฉ">ููุชููุฉ</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงูููุญุฉ</th>
                                <th>ููุน ุงูุตูุงูุฉ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูุชูููุฉ</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุงูููุงุญุธุงุช</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="maintenanceTable">
                            <tr class="empty-row">
                                <td colspan="7">ูุง ุชูุฌุฏ ุณุฌูุงุช ุตูุงูุฉ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุงููุฎุงููุงุช -->
            <section id="violations" class="section">
                <div class="section-header">
                    <h2>ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ</h2>
                    <button class="btn btn-primary" onclick="openViolationModal()">+ ุชุณุฌูู ูุฎุงููุฉ ุฌุฏูุฏุฉ</button>
                </div>

                <div class="filters">
                    <input type="text" id="violationSearch" placeholder="ุงุจุญุซ ุนู ููุญุฉ ุงููุฑูุจุฉ..." class="search-input">
                    <select id="violationStatusFilter" class="filter-select">
                        <option value="">ุฌููุน ุงูุญุงูุงุช</option>
                        <option value="ูุณุฏุฏุฉ">ูุณุฏุฏุฉ</option>
                        <option value="ูุนููุฉ">ูุนููุฉ</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงูููุญุฉ</th>
                                <th>ููุน ุงููุฎุงููุฉ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงููุจูุบ (ุฌููู)</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุงูููุงุญุธุงุช</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="violationsTable">
                            <tr class="empty-row">
                                <td colspan="7">ูุง ุชูุฌุฏ ูุฎุงููุงุช ูุณุฌูุฉ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุงูุฑุฎุต -->
            <section id="licenses" class="section">
                <div class="section-header">
                    <h2>ุชุชุจุน ุงูุฑุฎุต</h2>
                </div>

                <div class="filters">
                    <input type="text" id="licenseSearch" placeholder="ุงุจุญุซ ุนู ูุฑูุจุฉ..." class="search-input">
                    <select id="licenseStatusFilter" class="filter-select">
                        <option value="">ุฌููุน ุงูุญุงูุงุช</option>
                        <option value="ุณุงุฑูุฉ">ุณุงุฑูุฉ</option>
                        <option value="ููุชููุฉ">ููุชููุฉ</option>
                        <option value="ูุฑูุจุฉ ุงูุงูุชูุงุก">ูุฑูุจุฉ ุงูุงูุชูุงุก</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงูููุญุฉ</th>
                                <th>ุฑูู ุงูุฑุฎุตุฉ</th>
                                <th>ุชุงุฑูุฎ ุงูุฅุตุฏุงุฑ</th>
                                <th>ุชุงุฑูุฎ ุงูุงูุชูุงุก</th>
                                <th>ุงูุฃูุงู ุงููุชุจููุฉ</th>
                                <th>ุงูุญุงูุฉ</th>
                            </tr>
                        </thead>
                        <tbody id="licensesTable">
                            <tr class="empty-row">
                                <td colspan="6">ูุง ุชูุฌุฏ ุจูุงูุงุช ุฑุฎุต</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุงููููุงุช -->
            <section id="expenses" class="section">
                <div class="section-header">
                    <h2>ุฅุฏุงุฑุฉ ุงููููุงุช</h2>
                    <button class="btn btn-primary" onclick="openExpensesModal()">+ ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ</button>
                </div>

                <div class="filters">
                    <input type="text" id="expensesSearch" placeholder="ุงุจุญุซ ุนู ูููุฉ..." class="search-input">
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงูููุญุฉ</th>
                                <th>ููุน ุงููููุฉ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงููุจูุบ (ุฌููู)</th>
                                <th>ุงูููุงุญุธุงุช</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="expensesTable">
                            <tr class="empty-row">
                                <td colspan="6">ูุง ุชูุฌุฏ ูููุงุช ูุณุฌูุฉ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุงูุนูุฏุฉ -->
            <section id="advance" class="section">
                <div class="section-header">
                    <h2>ุฅุฏุงุฑุฉ ุงูุนูุฏุฉ</h2>
                    <button class="btn btn-primary" onclick="openAdvanceModal()">+ ุฅุถุงูุฉ ุนูุฏุฉ ุฌุฏูุฏุฉ</button>
                </div>

                <div class="card">
                    <h3>ููุฎุต ุงูุนูุฏุฉ</h3>
                    <div class="advance-summary">
                        <div class="summary-item">
                            <span class="summary-label">ุงูุนูุฏุฉ ุงููุชุงุญุฉ:</span>
                            <span class="summary-value" id="totalAdvance">0 ุฌููู</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">ุงููุตุฑูู ูู ุงูุนูุฏุฉ:</span>
                            <span class="summary-value" id="usedAdvance">0 ุฌููู</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">ุงููุชุจูู ูู ุงูุนูุฏุฉ:</span>
                            <span class="summary-value" id="remainingAdvance">0 ุฌููู</span>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ุงููุจูุบ (ุฌููู)</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุงูููุงุญุธุงุช</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="advanceTable">
                            <tr class="empty-row">
                                <td colspan="5">ูุง ุชูุฌุฏ ุนูุฏ ูุณุฌูุฉ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ุงูุชูุงุฑูุฑ -->
            <section id="reports" class="section">
                <div class="section-header">
                    <h2>ุงูุชูุงุฑูุฑ</h2>
                </div>

                <div class="reports-grid">
                    <div class="card report-card">
                        <h3>๐ ุชูุฑูุฑ ุงููุฑูุจุงุช</h3>
                        <p>ูุงุฆูุฉ ุดุงููุฉ ุจุฌููุน ุงููุฑูุจุงุช ูุญุงูุงุชูุง</p>
                        <div class="report-buttons">
                            <button class="btn btn-small btn-primary" onclick="generateVehiclesReportPDF()">PDF</button>
                            <button class="btn btn-small btn-success" onclick="generateVehiclesReportExcel()">Excel</button>
                            <button class="btn btn-small btn-info" onclick="printVehiclesReport()">ุทุจุงุนุฉ</button>
                        </div>
                    </div>

                    <div class="card report-card">
                        <h3>๐ง ุชูุฑูุฑ ุงูุตูุงูุฉ</h3>
                        <p>ุชูุงุตูู ุฌููุน ุนูููุงุช ุงูุตูุงูุฉ ูุงูุชุตููุญ</p>
                        <div class="report-buttons">
                            <button class="btn btn-small btn-primary" onclick="generateMaintenanceReportPDF()">PDF</button>
                            <button class="btn btn-small btn-success" onclick="generateMaintenanceReportExcel()">Excel</button>
                            <button class="btn btn-small btn-info" onclick="printMaintenanceReport()">ุทุจุงุนุฉ</button>
                        </div>
                    </div>

                    <div class="card report-card">
                        <h3>๐ฐ ุชูุฑูุฑ ุงููุตุฑููุงุช</h3>
                        <p>ุชูุฑูุฑ ุดุงูู ูุฌููุน ุงููุตุฑููุงุช ูุงููููุงุช</p>
                        <div class="report-buttons">
                            <button class="btn btn-small btn-primary" onclick="openExpensesFilterModal()">โ๏ธ ููุชุฑ</button>
                            <button class="btn btn-small btn-info" onclick="generateExpensesReportPDF()">PDF</button>
                            <button class="btn btn-small btn-success" onclick="generateExpensesReportExcel()">Excel</button>
                        </div>
                    </div>

                    <div class="card report-card">
                        <h3>๐ ุชูุฑูุฑ ุงูุฑุฎุต</h3>
                        <p>ุญุงูุฉ ุฌููุน ุฑุฎุต ุงููุฑูุจุงุช ูุงูุชูุจููุงุช</p>
                        <div class="report-buttons">
                            <button class="btn btn-small btn-primary" onclick="generateLicensesReportPDF()">PDF</button>
                            <button class="btn btn-small btn-success" onclick="generateLicensesReportExcel()">Excel</button>
                            <button class="btn btn-small btn-info" onclick="printLicensesReport()">ุทุจุงุนุฉ</button>
                        </div>
                    </div>

                    <div class="card report-card">
                        <h3>โ๏ธ ุชูุฑูุฑ ุงููุฎุงููุงุช</h3>
                        <p>ุชูุงุตูู ุฌููุน ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ ูุงููุฏููุนุงุช</p>
                        <div class="report-buttons">
                            <button class="btn btn-small btn-primary" onclick="generateViolationsReportPDF()">PDF</button>
                            <button class="btn btn-small btn-success" onclick="generateViolationsReportExcel()">Excel</button>
                            <button class="btn btn-small btn-info" onclick="printViolationsReport()">ุทุจุงุนุฉ</button>
                        </div>
                    </div>

                    <div class="card report-card">
                        <h3>๐ฐ ุชูุฑูุฑ ุงููููุงุช ูุงูุนูุฏุฉ</h3>
                        <p>ุชูุงุตูู ุงููููุงุช ูุงูุนูุฏุฉ ูุน ุงูุชูููุนุงุช ุงูุฑุณููุฉ</p>
                        <div class="report-buttons">
                            <button class="btn btn-small btn-primary" onclick="generateAdvanceExpensesReportPDF()">PDF</button>
                            <button class="btn btn-small btn-success" onclick="generateAdvanceExpensesReportExcel()">Excel</button>
                            <button class="btn btn-small btn-info" onclick="printAdvanceExpensesReport()">ุทุจุงุนุฉ</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ุงูุฅุนุฏุงุฏุงุช -->
            <section id="settings" class="section">
                <div class="section-header">
                    <h2>ุงูุฅุนุฏุงุฏุงุช</h2>
                </div>

                <div class="card">
                    <h3>ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h3>
                    <div class="settings-group">
                        <label>ุนุฏุฏ ุฃูุงู ุงูุชุญุฐูุฑ ูุจู ุงูุชูุงุก ุงูุฑุฎุตุฉ:</label>
                        <input type="number" id="licenseWarningDays" min="1" max="365" value="20">
                        <button class="btn btn-primary" onclick="saveLicenseWarningDays()">ุญูุธ</button>
                    </div>
                </div>

                <div class="card">
                    <h3>ุฎุทุฑ - ุญุฐู ุงูุจูุงูุงุช</h3>
                    <p style="color: #e74c3c;">ุชุญุฐูุฑ: ูุฐุง ุงูุฅุฌุฑุงุก ุณูุญุฐู ุฌููุน ุงูุจูุงูุงุช ุจุดูู ููุงุฆู</p>
                    <button class="btn btn-danger" onclick="confirmClearAllData()">ุญุฐู ุฌููุน ุงูุจูุงูุงุช</button>
                </div>

                <div class="card">
                    <h3>ุนู ุงููุธุงู</h3>
                    <p><strong>ุงูุฅุตุฏุงุฑ:</strong> 1.0</p>
                    <p><strong>ุขุฎุฑ ุชุญุฏูุซ:</strong> <span id="lastUpdate"></span></p>
                </div>
            </section>
        </main>
    </div>

    <!-- ูููุฏุฌ ุฅุถุงูุฉ/ุชุนุฏูู ูุฑูุจุฉ -->
    <div id="vehicleModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeVehicleModal()">&times;</span>
            <h2 id="vehicleModalTitle">ุฅุถุงูุฉ ูุฑูุจุฉ ุฌุฏูุฏุฉ</h2>
            <form id="vehicleForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุญุฉ ุงููุฑูุจุฉ *</label>
                        <input type="text" id="plateNumber" required placeholder="ูุซุงู: ุณ ุน ุฏ 123">
                    </div>
                    <div class="form-group">
                        <label>ูููุฐุฌ ุงููุฑูุจุฉ *</label>
                        <input type="text" id="vehicleModel" required placeholder="ูุซุงู: ุชูููุชุง ูุงูุฑู">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุณูุฉ ุงูุตูุน *</label>
                        <input type="number" id="vehicleYear" required min="1990" max="2100">
                    </div>
                    <div class="form-group">
                        <label>ุงุณู ุงูุณุงุฆู </label>
                        <input type="text" id="vinNumber" placeholder="ุฑูู ุงููููู ุงููุฑูุฏ">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุญุงูุฉ ุงูุญุงููุฉ *</label>
                        <select id="vehicleStatus" required>
                            <option value="ุงุฎุถุฑ">ุงุฎุถุฑ</option>
                            <option value="ูุทุญูู">ูุทุญูู</option>
                            <option value="ููู ููุธููู">ููู ููุธููู</option>
                            <option value="ููุงูู">ููุงูู</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุฑูู ุงูุฑุฎุตุฉ *</label>
                        <input type="text" id="licenseNumber" required placeholder="ุฑูู ุงูุฑุฎุตุฉ">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุชุงุฑูุฎ ุงูุชูุงุก ุงูุฑุฎุตุฉ *</label>
                        <input type="date" id="licenseExpiry" required>
                    </div>
                    <div class="form-group">
                        <label>ุนุฏุฏ ุงููุฎุงููุงุช</label>
                        <input type="number" id="violationCount" min="0" value="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงููุจูุบ ุงููุฏููุน ูู ุงููุฎุงููุงุช (ุฌููู)</label>
                        <input type="number" id="violationPaid" min="0" step="0.01" value="0">
                    </div>
                    <div class="form-group">
                        <label>ููุงุญุธุงุช</label>
                        <textarea id="vehicleNotes" rows="2" placeholder="ููุงุญุธุงุช ุนู ุงููุฑูุจุฉ"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ุญูุธ</button>
                    <button type="button" class="btn btn-secondary" onclick="closeVehicleModal()">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฏุฌ ุฅุถุงูุฉ ุตูุงูุฉ -->
    <div id="maintenanceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeMaintenanceModal()">&times;</span>
            <h2>ุชุณุฌูู ุตูุงูุฉ ุฌุฏูุฏุฉ</h2>
            <form id="maintenanceForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุญุฉ ุงููุฑูุจุฉ *</label>
                        <select id="maintenanceVehicle" required>
                            <option value="">ุงุฎุชุฑ ูุฑูุจุฉ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ููุน ุงูุตูุงูุฉ *</label>
                        <select id="maintenanceType" required>
                            <option value="">ุงุฎุชุฑ ุงูููุน</option>
                            <option value="ุตูุงูุฉ ุฏูุฑูุฉ">ุตูุงูุฉ ุฏูุฑูุฉ</option>
                            <option value="ุฅุตูุงุญ ูุญุฑู">ุฅุตูุงุญ ูุญุฑู</option>
                            <option value="ุฅุตูุงุญ ูุฑุงูู">ุฅุตูุงุญ ูุฑุงูู</option>
                            <option value="ุงุณุชุจุฏุงู ุฅุทุงุฑุงุช">ุงุณุชุจุฏุงู ุฅุทุงุฑุงุช</option>
                            <option value="ุตูุงูุฉ ููุฑุจุงุฆูุฉ">ุตูุงูุฉ ููุฑุจุงุฆูุฉ</option>
                            <option value="ุฅุตูุงุญ ูููู">ุฅุตูุงุญ ูููู</option>
                            <option value="ุตูุงูุฉ ุชุจุฑูุฏ">ุตูุงูุฉ ุชุจุฑูุฏ</option>
                            <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุชุงุฑูุฎ *</label>
                        <input type="date" id="maintenanceDate" required>
                    </div>
                    <div class="form-group">
                        <label>ุงูุชูููุฉ (ุฌููู) *</label>
                        <input type="number" id="maintenanceCost" required min="0" step="0.01">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุญุงูุฉ *</label>
                        <select id="maintenanceStatus" required>
                            <option value="ููุฏ ุงูุฅุฌุฑุงุก">ููุฏ ุงูุฅุฌุฑุงุก</option>
                            <option value="ููุชููุฉ">ููุชููุฉ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุงูููุงุญุธุงุช</label>
                        <textarea id="maintenanceNotes" rows="2" placeholder="ุชูุงุตูู ุงูุตูุงูุฉ"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ุญูุธ</button>
                    <button type="button" class="btn btn-secondary" onclick="closeMaintenanceModal()">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฏุฌ ุฅุถุงูุฉ ูุฎุงููุฉ -->
    <div id="violationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeViolationModal()">&times;</span>
            <h2>ุชุณุฌูู ูุฎุงููุฉ ุฌุฏูุฏุฉ</h2>
            <form id="violationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุญุฉ ุงููุฑูุจุฉ *</label>
                        <select id="violationVehicle" required>
                            <option value="">ุงุฎุชุฑ ูุฑูุจุฉ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ููุน ุงููุฎุงููุฉ *</label>
                        <select id="violationType" required>
                            <option value="">ุงุฎุชุฑ ุงูููุน</option>
                            <option value="ุชุฌุงูุฒ ุงูุณุฑุนุฉ">ุชุฌุงูุฒ ุงูุณุฑุนุฉ</option>
                            <option value="ุนุฏู ุงูุงูุชุฒุงู ุจุงูุญุฒุงู">ุนุฏู ุงูุงูุชุฒุงู ุจุงูุญุฒุงู</option>
                            <option value="ููุงุฏุฉ ูุชููุฑุฉ">ููุงุฏุฉ ูุชููุฑุฉ</option>
                            <option value="ูุฎุงููุฉ ุถูุก">ูุฎุงููุฉ ุถูุก</option>
                            <option value="ูููู ุบูุฑ ูุตุฑุญ">ูููู ุบูุฑ ูุตุฑุญ</option>
                            <option value="ุนุฏู ุตูุงูุฉ ุงููุฑูุจุฉ">ุนุฏู ุตูุงูุฉ ุงููุฑูุจุฉ</option>
                            <option value="ุฑุฎุตุฉ ููุชููุฉ">ุฑุฎุตุฉ ููุชููุฉ</option>
                            <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุชุงุฑูุฎ *</label>
                        <input type="date" id="violationDate" required>
                    </div>
                    <div class="form-group">
                        <label>ุงููุจูุบ (ุฌููู) *</label>
                        <input type="number" id="violationAmount" required min="0" step="0.01">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุญุงูุฉ *</label>
                        <select id="violationStatus" required>
                            <option value="ูุนููุฉ">ูุนููุฉ</option>
                            <option value="ูุณุฏุฏุฉ">ูุณุฏุฏุฉ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุงูููุงุญุธุงุช</label>
                        <textarea id="violationNotes" rows="2" placeholder="ุชูุงุตูู ุงููุฎุงููุฉ"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ุญูุธ</button>
                    <button type="button" class="btn btn-secondary" onclick="closeViolationModal()">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฏุฌ ุฅุถุงูุฉ ูููุฉ -->
    <div id="expensesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeExpensesModal()">&times;</span>
            <h2 id="expensesModalTitle">ุฅุถุงูุฉ ูููุฉ ุฌุฏูุฏุฉ</h2>
            <form id="expensesForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุญุฉ ุงููุฑูุจุฉ</label>
                        <select id="expensesVehicle">
                            <option value="">ุงุฎุชุฑ ูุฑูุจุฉ (ุงุฎุชูุงุฑู)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ููุน ุงููููุฉ *</label>
                        <div style="display: flex; gap: 10px;">
                            <select id="expensesType" required style="flex: 1;">
                                <option value="">ุงุฎุชุฑ ุงูููุน ุฃู ุงูุชุจ ูุฎุตุต</option>
                                <option value="ุตูุงูุฉ ุฏูุฑูุฉ">ุตูุงูุฉ ุฏูุฑูุฉ</option>
                                <option value="ุฅุตูุงุญ ูุญุฑู">ุฅุตูุงุญ ูุญุฑู</option>
                                <option value="ุฅุตูุงุญ ูุฑุงูู">ุฅุตูุงุญ ูุฑุงูู</option>
                                <option value="ุงุณุชุจุฏุงู ุฅุทุงุฑุงุช">ุงุณุชุจุฏุงู ุฅุทุงุฑุงุช</option>
                                <option value="ุตูุงูุฉ ููุฑุจุงุฆูุฉ">ุตูุงูุฉ ููุฑุจุงุฆูุฉ</option>
                                <option value="ุบุณูู ูุชูููุน">ุบุณูู ูุชูููุน</option>
                                <option value="ุชุฃููู">ุชุฃููู</option>
                                <option value="ูุณุญุงุช">ูุณุญุงุช</option>
                                <option value="ูููุฏ">ูููุฏ</option>
                            </select>
                            <input type="text" id="customExpenseType" placeholder="ุฃู ุงูุชุจ ููุน ูุฎุตุต" style="flex: 1;">
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุชุงุฑูุฎ *</label>
                        <input type="date" id="expensesDate" required>
                    </div>
                    <div class="form-group">
                        <label>ุงููุจูุบ (ุฌููู) *</label>
                        <input type="number" id="expensesAmount" required min="0" step="0.01">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุฑุจุท ุจุนูุฏุฉ (ุงุฎุชูุงุฑู)</label>
                        <select id="expensesAdvance">
                            <option value="">ูู ุชุฑุชุจุท ุจุนูุฏุฉ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุงูููุงุญุธุงุช</label>
                        <textarea id="expensesNotes" rows="2" placeholder="ุชูุงุตูู ุงููููุฉ"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ุญูุธ</button>
                    <button type="button" class="btn btn-secondary" onclick="closeExpensesModal()">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ุฅุถุงูุฉ ุนูุฏุฉ -->
    <div id="advanceModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAdvanceModal()">&times;</span>
            <h2 id="advanceModalTitle">ุฅุถุงูุฉ ุนูุฏุฉ ุฌุฏูุฏุฉ</h2>
            <form id="advanceForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงููุจูุบ (ุฌููู) *</label>
                        <input type="number" id="advanceAmount" required min="0" step="0.01" placeholder="ุฃุฏุฎู ูุจูุบ ุงูุนูุฏุฉ">
                    </div>
                    <div class="form-group">
                        <label>ุงูุชุงุฑูุฎ *</label>
                        <input type="date" id="advanceDate" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group" style="grid-column: 1/-1;">
                        <label>ุงูููุงุญุธุงุช</label>
                        <textarea id="advanceNotes" rows="3" placeholder="ููุงุญุธุงุช ุนู ุงูุนูุฏุฉ"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ุญูุธ</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAdvanceModal()">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ููุชุฑ ุชูุฑูุฑ ุงููุตุฑููุงุช -->
    <div id="expensesFilterModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeExpensesFilterModal()">&times;</span>
            <h2>ููุชุฑุฉ ุชูุฑูุฑ ุงููุตุฑููุงุช</h2>
            <form id="expensesFilterForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>ูู ุงูุชุงุฑูุฎ</label>
                        <input type="date" id="expensesFromDate">
                    </div>
                    <div class="form-group">
                        <label>ุฅูู ุงูุชุงุฑูุฎ</label>
                        <input type="date" id="expensesToDate">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ูู ุงููุจูุบ (ุฌููู)</label>
                        <input type="number" id="expensesFromAmount" min="0" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label>ุฅูู ุงููุจูุบ (ุฌููู)</label>
                        <input type="number" id="expensesToAmount" min="0" placeholder="0">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-primary" onclick="generateFilteredExpensesReportPDF()">ุนุฑุถ PDF</button>
                    <button type="button" class="btn btn-success" onclick="generateFilteredExpensesReportExcel()">ุนุฑุถ Excel</button>
                    <button type="button" class="btn btn-secondary" onclick="closeExpensesFilterModal()">ุฅุบูุงู</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
